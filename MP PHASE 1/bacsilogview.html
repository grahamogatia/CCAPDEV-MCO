<!DOCTYPE html>
<html>
<head>
  <title>Bacsilog</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="stylesheet" type="text/css" href="styleview.css"> 
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>

<style>
  body {
    margin: 0;
    padding-top: 50px;
    font-family: 'Mukta', sans-serif;
  }

  .header {
    position: fixed;
    top: 0;
    width: 100%;
    height: 50px;
    background-color: #1E5631;
    padding: 0 10px;
    display: flex;
    align-items: center;
    z-index: 2;
  }

  .header .button {
    padding: 5px 10px;
    color: black;
    border: none;
    cursor: pointer;
  }

  .header .button:hover {
    background-color: lightgray;
  }

  .header .buttonlog {
    padding: 5px 10px;
    color: #d21404;
    border: none;
    cursor: pointer;
  }

  .header .buttonlog:hover {
    background-color: darksalmon;
  }

  .search-bar {
    display: flex;
    align-items: center;
    height: 35px;
    max-width: 500px;
    margin: 0 auto;
    background-color: #fff;
    padding: 0 5px;
    border-radius: 5px;
  }

  .profpic {
    display: flex; 
    align-items: center;
    width: 40px;
    height: 40px;
    margin-right: 20px;
  }

  #logopic {
    width: 45px;
    height: 45px;
  }

  #commentpic {
    width: 20px;
    height: 20px;
  }

  .search-bar input[type="text"] {
    flex: 1;
    border: none;
    padding: 5px;
    font-size: 16px;
    transition: background-color 0.3s;
    outline: none;
  }

  .search-bar input[type="text"]:hover {
    background-color: #D3D3D3;
  }

  .search-bar input[type="text"] {
    flex: 1;
    border: none;
    padding: 5px;
    font-size: 13px;
    width: 1000px;
  }

  .search-bar button {
    padding: 5px 10px;
    background-color: #4C9A2A;
    color: #fff;
    border: none;
    cursor: pointer;
  }

  .search-bar button:hover {
    background-color: #ACDF87;
  }

  .dropdown {
    position: relative;
    display: inline-block;
    align-items: center;
  }

  #dropdownContent {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
    right: 40%;
  }

  .dropdown:hover #dropdownContent {
    display: block;
  }

  .dropdown a {
    display: block;
    text-decoration: none;
    color: #333;
  }

  .dropdown a:hover {
    background-color: #ddd;
  }

  .hide {
    display: none;
  }

  .bodyweb {
    padding: 0 20px;
    margin: 5px 0;
  }


  textarea{
    resize: vertical;
  }

  #commentsContainer {
    padding: 0 20px 20px;
    margin-top: 0;
    font-size: 14px;
  }

  .comment {
    display: flex;
    align-items: center;
  }
  
  .comment .profile-picture {
    margin-right: 10px;
    width: 30px;
    height: 30px;
  }
  
  #postButton {
    display: none;
  }
</style>

<script>
  var dropdownContent = document.getElementById("dropdownContent");
  var dropdownButton = document.getElementById("dropdownButton");
  var isCommentClicked = false;

  function toggleDropdown() {
    dropdownContent.classList.toggle("show");
  }

  function showTextarea() {
    var textarea = document.getElementById('myTextarea');
    textarea.classList.toggle('hide');
    isCommentClicked = !isCommentClicked;
    togglePostButtonVisibility();
  }

  function handleClick(action) {
    console.log("Clicked " + action);
  }

  dropdownButton.addEventListener("mouseout", function (event) {
    if (!dropdownContent.contains(event.toElement)) {
      dropdownContent.classList.remove("show");
    }
  });

  function togglePostButtonVisibility() {
    var textarea = document.getElementById('myTextarea');
    var postButton = document.getElementById('postButton');
    if (isCommentClicked && !textarea.classList.contains('hide')) {
      postButton.style.display = 'block';
    } else {
      postButton.style.display = 'none';
    }
  }

  function postComment() {
    var textareaValue = document.getElementById('myTextarea').value;
    
    if (textareaValue.trim() === '') {
      alert("Comment cannot be empty!");
      return;
    }
    
    var commentsContainer = document.getElementById('commentsContainer');
    
    var commentDiv = document.createElement('div');
    commentDiv.classList.add('comment');
    
    var profilePictureImg = document.createElement('img');
    profilePictureImg.src = "admin.png";
    profilePictureImg.alt = 'Profile Picture';
    profilePictureImg.classList.add('profile-picture');
    commentDiv.appendChild(profilePictureImg);
    
    var commentParagraph = document.createElement('p');
    commentParagraph.textContent = textareaValue;
    commentDiv.appendChild(commentParagraph);
    
    commentsContainer.appendChild(commentDiv);
    
    document.getElementById('myTextarea').value = '';
    
    var textarea = document.getElementById('myTextarea');
    var postButton = document.getElementById('postButton');
    textarea.classList.add('hide');
    postButton.style.display = 'none';
    isCommentClicked = false;
  }
</script>

<body>
  <header class="header">
    <a href="mainguest.html">
      <img src="icons/logo.png" id="logopic" alt="logo" style="padding-left: 10px; margin-right: 0px;">
    </a>
    <div class="search-bar">
      <input type="text" placeholder="Search Restaurants/Reviews">
      <button type="submit">Search</button>
    </div>
    <div class="dropdown">
      
      <img src="icons/profile.png" id="dropdownButton" class="profpic" alt="profile picture" onclick="toggleDropdown()">
      <div id="dropdownContent">
        <a href="register.html" class="button" onclick="handleClick('Register')">Register</a>
        <a href="login.html" class="button" onclick="handleClick('Login')">Login</a>
        <!-- <a href="login.html" class="buttonlog" onclick="handleClick('Logout')">Logout</a> -->
      </div>
    </div>
  </header>

  <div class="restaurant-info">
    <img src="Images/bacsilog.jpeg" alt="Restaurant Image" class="restaurant-image">
<div class="restaurant-description">
  <h2 class="restaurant-name">Ate Rica's Bacsilog</h2>
  <p class="resto-address"> Agno </p>
  <p class="resto-phone">Phone:8908-456-7890</p>
</div>
  </div>

  <h1 class="rev"> Reviews </h1>



  <div id="posts-container">
    <!-- Posts and associated comments will be dynamically added here -->
  </div>





  <style>
    
    body {
      font-family: Arial, sans-serif;
    }

    h1 {
      text-align: center;
    }

    #comments-container {
      margin-bottom: 20px;
    }

    .comment {
      margin-bottom: 10px;
      padding: 10px;
      border: 1px solid #ccc;
      /* background-color: #f5f5f5; */
    }

    .comment .author {
      font-weight: bold;
    }

    #comment-input {
      width: 100%;
      height: 100px;
      margin-bottom: 10px;
    }

    #comment-form button {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      font-size: 16px;
    }

    #comment-form button:hover {
      background-color: #45a049;
    }

    .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .popup-content {
      background-color: #fff;
      padding: 20px;
      border-radius: 5px;
      position: relative;
      width: 1000px;
    }

    .popup-close {
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
    }

    #posts-container {
      display: flex;
      justify-content: flex-start;
      gap: 20px;
      padding: 20px;
    }

    .post {
      width: 227px;
      padding: 10px;
      border: 1px solid #ccc;
      /* background-color: #f5f5f5; */
      border-radius: 10px;
    }

    .post-content {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      /* background-color: #f5f5f5; Add this line */

    }

    .view-comments-button {
        border-color: #f5f5f5;
        /* background-color: #f5f5f5; */
    }

    .author-wrapper {
  display: flex;
  align-items: center;
}


.author-image {
  margin-right: 10px;
}

.button-container {
  display: flex;
  align-items: center;
}

.button-container button {
  margin-right: 5px;
  border: none;
  background-color: transparent;
  cursor: pointer;
  padding: 2px;
  font-size: 16px;
}

.button-container button.upvote {
  color: #FF5700;
}



.button-container button.downvote {
  color: #7193FF;
}

/*

.button-container button.upvote:hover {
  color: black;
}

.button-container button.downvote:hover {
  color: black;
} */

.author-wrapper {
  display: flex;
  align-items: center;
}

.author-image {
  margin-right: 10px;
}

.button-container {
  display: flex;
  align-items: center;
}

.button-container button {
  margin-right: 5px;
  border: none;
  background-color: transparent;
  cursor: pointer;
  padding: 2px;
  font-size: 16px;
}

.button-container button.upvote {
  color: #FF5700;
}

.upvote5 {
  margin-right: 5px;
  border: none;
  background-color: transparent;
  cursor: pointer;
  padding: 2px;
  font-size: 16px;
}

.upvote5 {
  color: #FF5700;
}
.button-container button.downvote {
  color: #7193FF;
}


.popup-content .post-content {
  background-color: #fff;
  padding: 20px;
  border-radius: 5px;
}
.popup-close {
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
    }

    
  </style>
  <script>
    const posts = [
      {
        id: 1,
        author: "John",
        content: "I absolutely loved Ate Rica's Bacsilog! The combination of crispy bacon, runny fried egg, and garlicky fried rice was pure perfection. The flavors blended beautifully, and the portion size was generous. It's definitely my go-to breakfast spot now!",
        ratings: "⭐ Ratings: 5 out of 5",
        upvotes: 83,
        downvotes: 34,
        comments: [
          {
            id: 1,
            author: "Ate Rica's Bacsilog ©",
            content: "Thank you so much for your glowing review! We're thrilled to hear that you loved our Ate Rica's Bacsilog. We take pride in delivering a delicious and generous breakfast experience, and we're glad that we hit the mark for you. We appreciate your support and hope to serve you again soon!",
            upvotes: 23,
            downvotes: 2
          }
        ]
      },
      {
        id: 2,
        author: "Jane",
        ratings: "⭐ Ratings: 1 out of 5",
        content: "I was really disappointed with Ate Rica's Bacsilog. The bacon was overcooked and tasted burnt, the fried rice lacked flavor, and the egg was undercooked. It felt like a poorly executed dish overall. I won't be going back.",
        upvotes: 10,
        downvotes: 55,
        comments: [
          {
            id: 1,
            author: "Ate Rica's Bacsilog ©",
            content: "We apologize for the disappointing experience you had with our Bacsilog. We strive to maintain high-quality standards, and it's disheartening to hear that we missed the mark this time. We value your feedback and will make sure to address the issues you mentioned. We hope you'll give us another chance to provide you with a better dining experience in the future.",
            upvotes: 6,
            downvotes: 20
          }
        ]
      },
      {
        id: 3,
        author: "Billie",
        ratings: "⭐ Ratings: 5 out of 5",
        content: "Ate Rica's Bacsilog is a solid choice for a quick breakfast. The bacon was crispy, the fried rice had a nice garlicky kick, and the egg was cooked just right. It's a simple and satisfying meal, but it didn't blow me away.",
        upvotes: 50,
        downvotes: 56,
        comments: [
          {
            id: 1,
            author: "Ate Rica's Bacsilog ©",
            content: "Thank you for your review and for considering our Bacsilog a solid choice. We're glad you enjoyed the overall flavors and found it satisfying. We take all feedback into account and will continue to work on enhancing our dish to deliver an exceptional experience every time. We appreciate your support and hope to see you again soon.",
            upvotes: 33,
            downvotes: 21
          }
        ]
      },
      {
        id: 4,
        author: "Kovie",
        ratings: "⭐ Ratings: 3 out of 5",
        content: "I found Ate Rica's Bacsilog to be quite average. The bacon was a bit greasy, and the rice was dry. The portion size was decent, but the flavors didn't stand out. It's an okay option if you're in a hurry, but I wouldn't go out of my way for it.",
        upvotes: 102,
        downvotes: 15,
        comments: [
          {
            id: 1,
            author: "Ate Rica's Bacsilog ©",
            content: "We're sorry to hear that our Bacsilog didn't meet your expectations. We appreciate your honest feedback regarding the bacon, fried rice, and overall flavor. We're constantly striving to improve, and your comments will help us address the areas that need attention. We hope you'll consider giving us another chance in the future to provide you with a better dining experience.",
            upvotes: 35,
            downvotes: 62
          }
        ]
      }, 
      {
        id: 5,
        author: "Niki",
        ratings: "⭐ Ratings: 5 out of 5",
        content: "I'm a huge fan of Ate Rica's Bacsilog! The bacon was perfectly crispy, the fried rice was flavorful and had just the right amount of garlic, and the egg was deliciously runny. It's a delightful combination that always satisfies my breakfast cravings. Highly recommended!",
        upvotes: 95,
        downvotes: 53,
        comments: [
          {
            id: 1,
            author: "Ate Rica's Bacsilog ©",
            content: "Thank you for being a huge fan of our Bacsilog! We're delighted to hear that you loved the combination of flavors and found it satisfying. Your recommendation means a lot to us, and we'll continue to serve you with the same quality and deliciousness that you appreciate. We look forward to your next visit!",
            upvotes: 38,
            downvotes: 25
          }
        ]
      }
    ];

    function renderPosts() {
      const postsContainer = document.getElementById('posts-container');
      postsContainer.innerHTML = '';

      posts.forEach(post => {
        const postElement = document.createElement('div');
        postElement.classList.add('post');
        postElement.style.padding="10px";
        postElement.innerHTML = `
          <div class="author-wrapper">
            <img src="icons/admin.png" width="50px" height="50px" class="author-image">
            <p class="author">${post.author}</p>
          </div>
          <p class="post-content">${truncateString(post.content, 100)}</p>
          <div class="button-container">
            <div class="vote-count-container">
              <a href="login.html" style="text-decoration: none;">
  <button class="upvote">▲</button>
</a>

  <span class="upvote-count">${post.upvotes}</span>
</div>
<div class="vote-count-container">
  <a href="login.html" style="text-decoration: none;">
    <button class="downvote">▼</button>
  </a>
  <span class="downvote-count">${post.downvotes}</span>
</div>

            <button class="view-comments-button" data-post-id="${post.id}">See More</button>
          </div>
        `;
        postsContainer.appendChild(postElement);

        const upvoteButton = postElement.querySelector('.upvote');
        const downvoteButton = postElement.querySelector('.downvote');
        const upvoteCount = postElement.querySelector('.upvote-count');
        const downvoteCount = postElement.querySelector('.downvote-count');
      });

      const viewCommentsButtons = document.getElementsByClassName('view-comments-button');
      Array.from(viewCommentsButtons).forEach(button => {
        button.addEventListener('click', handleViewComments);
      });
    }

    function truncateString(str, maxLength) {
      if (str.length > maxLength) {
        return str.substring(0, maxLength) + '...';
      }
      return str;
    }

    function handleViewComments(event) {
  const postId = event.target.dataset.postId;
  const post = posts.find(post => post.id == postId);

  if (!post) return;

  const popupOverlay = document.createElement('div');
  popupOverlay.classList.add('popup-overlay');
  popupOverlay.style.zIndex='3';
  popupOverlay.style.backgroundColor = 'grey';
  popupOverlay.style.display = 'flex';
  popupOverlay.style.alignItems = 'center';
  popupOverlay.style.justifyContent = 'center';
  popupOverlay.style.position = 'fixed';
  popupOverlay.style.top = '0';
  popupOverlay.style.left = '0';
  popupOverlay.style.width = '100%';
  popupOverlay.style.height = '100%';
  popupOverlay.style.opacity = '95%';


  const popupContent = document.createElement('div');
  popupContent.style.backgroundColor="#f5f5f5";
  popupContent.style.width="800px";
  popupContent.style.padding="10px";
  popupContent.style.borderRadius="7%";
  popupContent.innerHTML = `
  
  <div class="post-content">
    <div class="author-wrapper">
      <span class="popup-close">&times;</span> <!-- Add the close button -->

      <img src="icons/admin.png" width="50px" height="50px" class="author-image" style="padding:10px">
      <p class="author">${post.author}</p>
    </div>
    <p style="white-space: normal;">${post.content}</p>
    <p>${post.ratings}</p>
    <div class="button-container">
      <div class="vote-count-container">
        <a href="login.html">
          <button class="upvote">▲</button>
        </a>
        <span class="upvote-count">${post.upvotes}</span>
      </div>
      <div class="vote-count-container">
        <a href="login.html">
          <button class="downvote">▼</button>
        </a>
        <span class="downvote-count">${post.downvotes}</span>
      </div>
    </div>
  </div>
  <h4>Comments</h4>
`;



const closeButton = document.createElement('span');
  closeButton.classList.add('popup-close');
  closeButton.innerHTML = '&times;';
  closeButton.addEventListener('click', () => {
    popupOverlay.remove();
  });

  popupContent.querySelector('.post-content').appendChild(closeButton);

  post.comments.forEach(comment => {
    const commentElement = document.createElement('div');
    commentElement.classList.add('comment');
    commentElement.innerHTML = `
      <div class="author-wrapper">
        <img src="Bacsilog/logo.png" width="50px" height="50px" class="author-image">
        <p class="author">${comment.author}</p><span>&nbsp;</span>
      </div>
      <p class="comment-content">${comment.content}</p>
      <div class="vote-count-container">
        <a href="login.html">
          <button class="upvote5">▲</button>
        </a>

        <span class="upvote-count">${comment.upvotes}</span>
        <a href="login.html">
          <button class="downvote5">▼</button>
        </a>
      </div>
  <span class="downvote-count">${comment.downvotes}</span>
      </div>
    
<style>
  .vote-count-container {
    display: inline-flex; /* Use inline-flex to make the buttons appear in a single line */
    align-items: center; /* Align items vertically center */
  }

  .upvote5,
  .downvote5 {
    margin-right: 5px;
    border: none;
    background-color: transparent;
    cursor: pointer;
    padding: 2px;
    font-size: 16px;
  }

  .upvote5 {
    color: #FF5700;
  }

  .downvote5 {
    color: #7193FF;
  }

  
</style>
`;

    const upvoteButton = commentElement.querySelector('.upvote');
    const downvoteButton = commentElement.querySelector('.downvote');
    const upvoteCount = commentElement.querySelector('.upvote-count');
    const downvoteCount = commentElement.querySelector('.downvote-count');

    popupContent.appendChild(commentElement);
  });

  const popup = document.createElement('div');
  popup.classList.add('popup');
  popup.appendChild(popupContent);

  popupOverlay.appendChild(popup);
  document.body.appendChild(popupOverlay);
}


    renderPosts();
  </script>
</body>
</html>
